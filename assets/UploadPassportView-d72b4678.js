import{h as z,j as b,l as O,o as q,c as R,aj as ke,ak as ie,al as _e,am as ue,I as ce,an as $e,a1 as ee,x as v,J as E,C as y,D as e,B as U,E as I,V as F,a2 as K,G as k,y as L,A as w,P as we,H as j,_ as W,Y as de,ao as x,ap as C,aq as V,e as pe,K as Ee,S as Se,ar as fe,F as M,z as D,as as Ce,O as Pe,at as Re,au as Fe,av as Ue,aw as Le,q as Y,w as te,ax as Te,ay as De,az as Oe,aA as Be,aB as Ne,aC as se,$ as ae,aD as je,aE as Ae,a6 as Ie}from"./index-55fb4e18.js";import{m as Q,u as qe,e as Me,b as ze}from"./index-bd42adee.js";function me(a){return a==null}const ve=Symbol("uploadContextKey"),He=z({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:a=>a>=0&&a<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:b(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:b([String,Array,Function]),default:""},format:{type:b(Function),default:a=>`${a}%`}}),Ke=["aria-valuenow"],We={viewBox:"0 0 100 100"},Ve=["d","stroke","stroke-width"],Xe=["d","stroke","opacity","stroke-linecap","stroke-width"],Ge={key:0},Je=O({name:"ElProgress"}),Ye=O({...Je,props:He,setup(a){const t=a,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=q("progress"),f=R(()=>({width:`${t.percentage}%`,animationDuration:`${t.duration}s`,backgroundColor:A(t.percentage)})),p=R(()=>(t.strokeWidth/t.width*100).toFixed(1)),m=R(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(p.value)/2}`,10):0),S=R(()=>{const l=m.value,T=t.type==="dashboard";return`
          M 50 50
          m 0 ${T?"":"-"}${l}
          a ${l} ${l} 0 1 1 0 ${T?"-":""}${l*2}
          a ${l} ${l} 0 1 1 0 ${T?"":"-"}${l*2}
          `}),_=R(()=>2*Math.PI*m.value),c=R(()=>t.type==="dashboard"?.75:1),$=R(()=>`${-1*_.value*(1-c.value)/2}px`),h=R(()=>({strokeDasharray:`${_.value*c.value}px, ${_.value}px`,strokeDashoffset:$.value})),r=R(()=>({strokeDasharray:`${_.value*c.value*(t.percentage/100)}px, ${_.value}px`,strokeDashoffset:$.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),u=R(()=>{let l;return t.color?l=A(t.percentage):l=n[t.status]||n.default,l}),s=R(()=>t.status==="warning"?ke:t.type==="line"?t.status==="success"?ie:_e:t.status==="success"?ue:ce),d=R(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),g=R(()=>t.format(t.percentage));function i(l){const T=100/l.length;return l.map((P,N)=>ee(P)?{color:P,percentage:(N+1)*T}:P).sort((P,N)=>P.percentage-N.percentage)}const A=l=>{var T;const{color:B}=t;if($e(B))return B(l);if(ee(B))return B;{const P=i(B);for(const N of P)if(N.percentage>l)return N.color;return(T=P[P.length-1])==null?void 0:T.color}};return(l,T)=>(v(),E("div",{class:y([e(o).b(),e(o).m(l.type),e(o).is(l.status),{[e(o).m("without-text")]:!l.showText,[e(o).m("text-inside")]:l.textInside}]),role:"progressbar","aria-valuenow":l.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[l.type==="line"?(v(),E("div",{key:0,class:y(e(o).b("bar"))},[U("div",{class:y(e(o).be("bar","outer")),style:I({height:`${l.strokeWidth}px`})},[U("div",{class:y([e(o).be("bar","inner"),{[e(o).bem("bar","inner","indeterminate")]:l.indeterminate}]),style:I(e(f))},[(l.showText||l.$slots.default)&&l.textInside?(v(),E("div",{key:0,class:y(e(o).be("bar","innerText"))},[F(l.$slots,"default",{percentage:l.percentage},()=>[U("span",null,K(e(g)),1)])],2)):k("v-if",!0)],6)],6)],2)):(v(),E("div",{key:1,class:y(e(o).b("circle")),style:I({height:`${l.width}px`,width:`${l.width}px`})},[(v(),E("svg",We,[U("path",{class:y(e(o).be("circle","track")),d:e(S),stroke:`var(${e(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(p),fill:"none",style:I(e(h))},null,14,Ve),U("path",{class:y(e(o).be("circle","path")),d:e(S),stroke:e(u),fill:"none",opacity:l.percentage?1:0,"stroke-linecap":l.strokeLinecap,"stroke-width":e(p),style:I(e(r))},null,14,Xe)]))],6)),(l.showText||l.$slots.default)&&!l.textInside?(v(),E("div",{key:2,class:y(e(o).e("text")),style:I({fontSize:`${e(d)}px`})},[F(l.$slots,"default",{percentage:l.percentage},()=>[l.status?(v(),L(e(j),{key:1},{default:w(()=>[(v(),L(we(e(s))))]),_:1})):(v(),E("span",Ge,K(e(g)),1))])],6)):k("v-if",!0)],10,Ke))}});var Qe=W(Ye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Ze=de(Qe),xe="ElUpload";class et extends Error{constructor(t,n,o,f){super(t),this.name="UploadAjaxError",this.status=n,this.method=o,this.url=f}}function oe(a,t,n){let o;return n.response?o=`${n.response.error||n.response}`:n.responseText?o=`${n.responseText}`:o=`fail to ${t.method} ${a} ${n.status}`,new et(o,n.status,t.method,a)}function tt(a){const t=a.responseText||a.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const st=a=>{typeof XMLHttpRequest>"u"&&x(xe,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=a.action;t.upload&&t.upload.addEventListener("progress",p=>{const m=p;m.percent=p.total>0?p.loaded/p.total*100:0,a.onProgress(m)});const o=new FormData;if(a.data)for(const[p,m]of Object.entries(a.data))Array.isArray(m)?o.append(p,...m):o.append(p,m);o.append(a.filename,a.file,a.file.name),t.addEventListener("error",()=>{a.onError(oe(n,a,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return a.onError(oe(n,a,t));a.onSuccess(tt(t))}),t.open(a.method,n,!0),a.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const f=a.headers||{};if(f instanceof Headers)f.forEach((p,m)=>t.setRequestHeader(m,p));else for(const[p,m]of Object.entries(f))me(m)||t.setRequestHeader(p,String(m));return t.send(o),t},ye=["text","picture","picture-card"];let at=1;const Z=()=>Date.now()+at++,he=z({action:{type:String,default:"#"},headers:{type:b(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>Q({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:b(Array),default:()=>Q([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:ye,default:"text"},httpRequest:{type:b(Function),default:st},disabled:Boolean,limit:Number}),ot=z({...he,beforeUpload:{type:b(Function),default:C},beforeRemove:{type:b(Function)},onRemove:{type:b(Function),default:C},onChange:{type:b(Function),default:C},onPreview:{type:b(Function),default:C},onSuccess:{type:b(Function),default:C},onProgress:{type:b(Function),default:C},onError:{type:b(Function),default:C},onExceed:{type:b(Function),default:C}}),nt=z({files:{type:b(Array),default:()=>Q([])},disabled:{type:Boolean,default:!1},handlePreview:{type:b(Function),default:C},listType:{type:String,values:ye,default:"text"}}),rt={remove:a=>!!a},lt=["onKeydown"],it=["src"],ut=["onClick"],ct=["onClick"],dt=["onClick"],pt=O({name:"ElUploadList"}),ft=O({...pt,props:nt,emits:rt,setup(a,{emit:t}){const{t:n}=qe(),o=q("upload"),f=q("icon"),p=q("list"),m=V(),S=pe(!1),_=c=>{t("remove",c)};return(c,$)=>(v(),L(Fe,{tag:"ul",class:y([e(o).b("list"),e(o).bm("list",c.listType),e(o).is("disabled",e(m))]),name:e(p).b()},{default:w(()=>[(v(!0),E(Ee,null,Se(c.files,h=>(v(),E("li",{key:h.uid||h.name,class:y([e(o).be("list","item"),e(o).is(h.status),{focusing:S.value}]),tabindex:"0",onKeydown:fe(r=>!e(m)&&_(h),["delete"]),onFocus:$[0]||($[0]=r=>S.value=!0),onBlur:$[1]||($[1]=r=>S.value=!1),onClick:$[2]||($[2]=r=>S.value=!1)},[F(c.$slots,"default",{file:h},()=>[c.listType==="picture"||h.status!=="uploading"&&c.listType==="picture-card"?(v(),E("img",{key:0,class:y(e(o).be("list","item-thumbnail")),src:h.url,alt:""},null,10,it)):k("v-if",!0),h.status==="uploading"||c.listType!=="picture-card"?(v(),E("div",{key:1,class:y(e(o).be("list","item-info"))},[U("a",{class:y(e(o).be("list","item-name")),onClick:M(r=>c.handlePreview(h),["prevent"])},[D(e(j),{class:y(e(f).m("document"))},{default:w(()=>[D(e(Ce))]),_:1},8,["class"]),U("span",{class:y(e(o).be("list","item-file-name"))},K(h.name),3)],10,ut),h.status==="uploading"?(v(),L(e(Ze),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:I(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):k("v-if",!0)],2)):k("v-if",!0),U("label",{class:y(e(o).be("list","item-status-label"))},[c.listType==="text"?(v(),L(e(j),{key:0,class:y([e(f).m("upload-success"),e(f).m("circle-check")])},{default:w(()=>[D(e(ie))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(v(),L(e(j),{key:1,class:y([e(f).m("upload-success"),e(f).m("check")])},{default:w(()=>[D(e(ue))]),_:1},8,["class"])):k("v-if",!0)],2),e(m)?k("v-if",!0):(v(),L(e(j),{key:2,class:y(e(f).m("close")),onClick:r=>_(h)},{default:w(()=>[D(e(ce))]),_:2},1032,["class","onClick"])),k(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),k(" This is a bug which needs to be fixed "),k(" TODO: Fix the incorrect navigation interaction "),e(m)?k("v-if",!0):(v(),E("i",{key:3,class:y(e(f).m("close-tip"))},K(e(n)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(v(),E("span",{key:4,class:y(e(o).be("list","item-actions"))},[U("span",{class:y(e(o).be("list","item-preview")),onClick:r=>c.handlePreview(h)},[D(e(j),{class:y(e(f).m("zoom-in"))},{default:w(()=>[D(e(Pe))]),_:1},8,["class"])],10,ct),e(m)?k("v-if",!0):(v(),E("span",{key:0,class:y(e(o).be("list","item-delete")),onClick:r=>_(h)},[D(e(j),{class:y(e(f).m("delete"))},{default:w(()=>[D(e(Re))]),_:1},8,["class"])],10,dt))],2)):k("v-if",!0)])],42,lt))),128)),F(c.$slots,"append")]),_:3},8,["class","name"]))}});var ne=W(ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const mt=z({disabled:{type:Boolean,default:!1}}),vt={file:a=>Ue(a)},yt=["onDrop","onDragover"],ge="ElUploadDrag",ht=O({name:ge}),gt=O({...ht,props:mt,emits:vt,setup(a,{emit:t}){const n=Le(ve);n||x(ge,"usage: <el-upload><el-upload-dragger /></el-upload>");const o=q("upload"),f=pe(!1),p=V(),m=_=>{if(p.value)return;f.value=!1;const c=Array.from(_.dataTransfer.files),$=n.accept.value;if(!$){t("file",c);return}const h=c.filter(r=>{const{type:u,name:s}=r,d=s.includes(".")?`.${s.split(".").pop()}`:"",g=u.replace(/\/.*$/,"");return $.split(",").map(i=>i.trim()).filter(i=>i).some(i=>i.startsWith(".")?d===i:/\/\*$/.test(i)?g===i.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(i)?u===i:!1)});t("file",h)},S=()=>{p.value||(f.value=!0)};return(_,c)=>(v(),E("div",{class:y([e(o).b("dragger"),e(o).is("dragover",f.value)]),onDrop:M(m,["prevent"]),onDragover:M(S,["prevent"]),onDragleave:c[0]||(c[0]=M($=>f.value=!1,["prevent"]))},[F(_.$slots,"default")],42,yt))}});var bt=W(gt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const kt=z({...he,beforeUpload:{type:b(Function),default:C},onRemove:{type:b(Function),default:C},onStart:{type:b(Function),default:C},onSuccess:{type:b(Function),default:C},onProgress:{type:b(Function),default:C},onError:{type:b(Function),default:C},onExceed:{type:b(Function),default:C}}),_t=["onKeydown"],$t=["name","multiple","accept"],wt=O({name:"ElUploadContent",inheritAttrs:!1}),Et=O({...wt,props:kt,setup(a,{expose:t}){const n=a,o=q("upload"),f=V(),p=Y({}),m=Y(),S=s=>{if(s.length===0)return;const{autoUpload:d,limit:g,fileList:i,multiple:A,onStart:l,onExceed:T}=n;if(g&&i.length+s.length>g){T(s,i);return}A||(s=s.slice(0,1));for(const B of s){const P=B;P.uid=Z(),l(P),d&&_(P)}},_=async s=>{if(m.value.value="",!n.beforeUpload)return c(s);let d;try{d=await n.beforeUpload(s)}catch{d=!1}if(d===!1){n.onRemove(s);return}let g=s;d instanceof Blob&&(d instanceof File?g=d:g=new File([d],s.name,{type:s.type})),c(Object.assign(g,{uid:s.uid}))},c=s=>{const{headers:d,data:g,method:i,withCredentials:A,name:l,action:T,onProgress:B,onSuccess:P,onError:N,httpRequest:be}=n,{uid:X}=s,G={headers:d||{},withCredentials:A,file:s,data:g,method:i,filename:l,action:T,onProgress:H=>{B(H,s)},onSuccess:H=>{P(H,s),delete p.value[X]},onError:H=>{N(H,s),delete p.value[X]}},J=be(G);p.value[X]=J,J instanceof Promise&&J.then(G.onSuccess,G.onError)},$=s=>{const d=s.target.files;!d||S(Array.from(d))},h=()=>{f.value||(m.value.value="",m.value.click())},r=()=>{h()};return t({abort:s=>{Me(p.value).filter(s?([g])=>String(s.uid)===g:()=>!0).forEach(([g,i])=>{i instanceof XMLHttpRequest&&i.abort(),delete p.value[g]})},upload:_}),(s,d)=>(v(),E("div",{class:y([e(o).b(),e(o).m(s.listType),e(o).is("drag",s.drag)]),tabindex:"0",onClick:h,onKeydown:fe(M(r,["self"]),["enter","space"])},[s.drag?(v(),L(bt,{key:0,disabled:e(f),onFile:S},{default:w(()=>[F(s.$slots,"default")]),_:3},8,["disabled"])):F(s.$slots,"default",{key:1}),U("input",{ref_key:"inputRef",ref:m,class:y(e(o).e("input")),name:s.name,multiple:s.multiple,accept:s.accept,type:"file",onChange:$,onClick:d[0]||(d[0]=M(()=>{},["stop"]))},null,42,$t)],42,_t))}});var re=W(Et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const le="ElUpload",St=a=>{var t;(t=a.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(a.url)},Ct=(a,t)=>{const n=ze(a,"fileList",void 0,{passive:!0}),o=r=>n.value.find(u=>u.uid===r.uid);function f(r){var u;(u=t.value)==null||u.abort(r)}function p(r=["ready","uploading","success","fail"]){n.value=n.value.filter(u=>!r.includes(u.status))}const m=(r,u)=>{const s=o(u);!s||(console.error(r),s.status="fail",n.value.splice(n.value.indexOf(s),1),a.onError(r,s,n.value),a.onChange(s,n.value))},S=(r,u)=>{const s=o(u);!s||(a.onProgress(r,s,n.value),s.status="uploading",s.percentage=Math.round(r.percent))},_=(r,u)=>{const s=o(u);!s||(s.status="success",s.response=r,a.onSuccess(r,s,n.value),a.onChange(s,n.value))},c=r=>{me(r.uid)&&(r.uid=Z());const u={name:r.name,percentage:0,status:"ready",size:r.size,raw:r,uid:r.uid};if(a.listType==="picture-card"||a.listType==="picture")try{u.url=URL.createObjectURL(r)}catch(s){Te(le,s.message),a.onError(s,u,n.value)}n.value=[...n.value,u],a.onChange(u,n.value)},$=async r=>{const u=r instanceof File?o(r):r;u||x(le,"file to be removed not found");const s=d=>{f(d);const g=n.value;g.splice(g.indexOf(d),1),a.onRemove(d,g),St(d)};a.beforeRemove?await a.beforeRemove(u,n.value)!==!1&&s(u):s(u)};function h(){n.value.filter(({status:r})=>r==="ready").forEach(({raw:r})=>{var u;return r&&((u=t.value)==null?void 0:u.upload(r))})}return te(()=>a.listType,r=>{r!=="picture-card"&&r!=="picture"||(n.value=n.value.map(u=>{const{raw:s,url:d}=u;if(!d&&s)try{u.url=URL.createObjectURL(s)}catch(g){a.onError(g,u,n.value)}return u}))}),te(n,r=>{for(const u of r)u.uid||(u.uid=Z()),u.status||(u.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:f,clearFiles:p,handleError:m,handleProgress:S,handleStart:c,handleSuccess:_,handleRemove:$,submit:h}},Pt=O({name:"ElUpload"}),Rt=O({...Pt,props:ot,setup(a,{expose:t}){const n=a,o=De(),f=V(),p=Y(),{abort:m,submit:S,clearFiles:_,uploadFiles:c,handleStart:$,handleError:h,handleRemove:r,handleSuccess:u,handleProgress:s}=Ct(n,p),d=R(()=>n.listType==="picture-card"),g=R(()=>({...n,fileList:c.value,onStart:$,onProgress:s,onSuccess:u,onError:h,onRemove:r}));return Oe(()=>{c.value.forEach(({url:i})=>{i!=null&&i.startsWith("blob:")&&URL.revokeObjectURL(i)})}),Be(ve,{accept:Ne(n,"accept")}),t({abort:m,submit:S,clearFiles:_,handleStart:$,handleRemove:r}),(i,A)=>(v(),E("div",null,[e(d)&&i.showFileList?(v(),L(ne,{key:0,disabled:e(f),"list-type":i.listType,files:e(c),"handle-preview":i.onPreview,onRemove:e(r)},se({append:w(()=>[D(re,ae({ref_key:"uploadRef",ref:p},e(g)),{default:w(()=>[e(o).trigger?F(i.$slots,"trigger",{key:0}):k("v-if",!0),!e(o).trigger&&e(o).default?F(i.$slots,"default",{key:1}):k("v-if",!0)]),_:3},16)]),_:2},[i.$slots.file?{name:"default",fn:w(({file:l})=>[F(i.$slots,"file",{file:l})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):k("v-if",!0),!e(d)||e(d)&&!i.showFileList?(v(),L(re,ae({key:1,ref_key:"uploadRef",ref:p},e(g)),{default:w(()=>[e(o).trigger?F(i.$slots,"trigger",{key:0}):k("v-if",!0),!e(o).trigger&&e(o).default?F(i.$slots,"default",{key:1}):k("v-if",!0)]),_:3},16)):k("v-if",!0),i.$slots.trigger?F(i.$slots,"default",{key:2}):k("v-if",!0),F(i.$slots,"tip"),!e(d)&&i.showFileList?(v(),L(ne,{key:3,disabled:e(f),"list-type":i.listType,files:e(c),"handle-preview":i.onPreview,onRemove:e(r)},se({_:2},[i.$slots.file?{name:"default",fn:w(({file:l})=>[F(i.$slots,"file",{file:l})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):k("v-if",!0)]))}});var Ft=W(Rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Ut=de(Ft);const Lt=U("div",{class:"el-upload__text"},[Ae(" Drop file here or "),U("em",null,"click to upload")],-1),Tt=U("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb ",-1),Dt=O({__name:"UploadFile",setup(a){let t=n=>{console.log("upload hit",n)};return(n,o)=>{const f=j,p=Ut;return v(),L(p,{class:"upload-demo",drag:"",action:e(t)(n.icon),multiple:""},{tip:w(()=>[Tt]),default:w(()=>[D(f,{class:"el-icon--upload"},{default:w(()=>[D(e(je))]),_:1}),Lt]),_:1},8,["action"])}}}),Ot={class:"header"},Bt={__name:"UploadItem",props:{title:String},setup(a){return(t,n)=>{const o=Ie;return v(),L(o,{class:"main-card"},{header:w(()=>[U("div",Ot,[U("h1",null,K(a.title),1)])]),default:w(()=>[D(Dt)]),_:1})}}},At={__name:"UploadPassportView",setup(a){return(t,n)=>(v(),L(Bt,{title:"Upload Passport"}))}};export{At as default};
