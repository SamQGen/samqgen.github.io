import{p as j,q as u,v as x,ah as B,h as _,ai as U,A,s as D,aj as I,F as m,G as w,I as c,a0 as S,K as L,l as $,L as V,W as F,a3 as R,a4 as K,J as h,a9 as N,H as d,ak as y,_ as k,$ as C,Q as P,R as q,Z as G,ac as H,ae as W,ad as J}from"./index-b74a22d8.js";import{m as f,_ as Q}from"./typescript-f1f07b4c.js";const Z=j({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:u([Number,Object]),default:()=>f({})},sm:{type:u([Number,Object]),default:()=>f({})},md:{type:u([Number,Object]),default:()=>f({})},lg:{type:u([Number,Object]),default:()=>f({})},xl:{type:u([Number,Object]),default:()=>f({})}}),X=x({name:"ElCol"}),Y=x({...X,props:Z,setup(n){const t=n,{gutter:e}=B(U,{gutter:_(()=>0)}),s=A("col"),i=_(()=>{const a={};return e.value&&(a.paddingLeft=a.paddingRight=`${e.value/2}px`),a}),r=_(()=>{const a=[];return["span","offset","pull","push"].forEach(o=>{const l=t[o];D(l)&&(o==="span"?a.push(s.b(`${t[o]}`)):l>0&&a.push(s.b(`${o}-${t[o]}`)))}),["xs","sm","md","lg","xl"].forEach(o=>{D(t[o])?a.push(s.b(`${o}-${t[o]}`)):I(t[o])&&Object.entries(t[o]).forEach(([l,g])=>{a.push(l!=="span"?s.b(`${o}-${l}-${g}`):s.b(`${o}-${g}`))})}),e.value&&a.push(s.is("guttered")),[s.b(),a]});return(a,p)=>(m(),w(F(a.tag),{class:L($(r)),style:V($(i))},{default:c(()=>[S(a.$slots,"default")]),_:3},8,["class","style"]))}});var z=R(Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const ee=K(z);var v={},E={};Object.defineProperty(E,"__esModule",{value:!0});function te(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var ae=function n(t){te(this,n),this.id=t.deviceId,this.label=t.label};E.default=ae;Object.defineProperty(v,"__esModule",{value:!0});v.Constraints=void 0;var T=function(){function n(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,s){return e&&n(t.prototype,e),s&&n(t,s),t}}(),ne=E,se=ie(ne);function ie(n){return n&&n.__esModule?n:{default:n}}function O(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var b=v.Constraints=function(){function n(){O(this,n),this.video={facingMode:"user"},this.audio=!1}return T(n,[{key:"switchFacingMode",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.video.facingMode==="user"?this.video.facingMode="environment":e?this.video.facingMode={exact:"environment"}:this.video.facingMode="user",this}},{key:"getConstraint",value:function(){return{video:this.video,audio:this.audio}}}]),n}(),oe=function(){function n(t,e){O(this,n),this.devices=[],this.stream=null,this.canvasElement=e,this.videoElement=t,this.constraints=new b}return T(n,[{key:"getDevices",value:function(){var e=this;return new Promise(async function(s,i){if(e.devices.length>0){s(e.devices);return}try{var r=await navigator.mediaDevices.enumerateDevices();r.forEach(function(a){a.kind&&a.kind.toLocaleLowerCase()==="videoinput"&&e.devices.push(new se.default(a))}),s(e.devices)}catch(a){console.error("GetDevices",a),i(a)}})}},{key:"setVideoConstraints",value:function(e){return this.constraints||(this.constraints=new b),this.constraints.video=e,this}},{key:"snap",value:function(){this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight;var e=this.canvasElement.getContext("2d");return e.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height),this.canvasElement}},{key:"snapAsDataUrl",value:function(){this.snap();var e=this.canvasElement.toDataURL("image/png");return e}},{key:"snapAsBlob",value:function(){var e=this;return this.snap(),new Promise(function(s){e.canvasElement.toBlob(function(i){s(i)},"image/png",1)})}},{key:"start",value:function(){var e=this;return new Promise(async function(s,i){try{await e.getDevices();var r=await navigator.mediaDevices.getUserMedia(e.constraints.getConstraint());e.videoElement.srcObject=r,e.stream=r,s()}catch(a){console.error("StartCamera",a),i(a)}})}},{key:"stop",value:function(){if(!!this.stream){var e=this.videoElement.srcObject.getTracks();e.forEach(function(s){return s.stop()})}}},{key:"switch",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return new Promise(async function(i,r){e.constraints=e.constraints.switchFacingMode(s),e.stop();try{await e.start(),i()}catch(a){console.error("SwitchCamera",a),r(a)}})}}],[{key:"isCameraSupported",value:function(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices}},{key:"tryInvokePermission",value:function(e,s){return new Promise(async function(i,r){try{await navigator.mediaDevices.getUserMedia(new b),i(new n(e,s))}catch(a){console.error("MediaDevices",a),r(a)}})}}]),n}(),re=v.default=oe;const le={mounted(){var n=document.getElementsByTagName("video")[0],t=document.getElementsByTagName("canvas")[0];re.tryInvokePermission(n,t).then(e=>{this.camera=e,e.start(),console.log("camera started"),e.snap().then(s=>{console.log("data from snap ",s)})}).catch(e=>{})},props:["title"],methods:{takePic(){console.log("take pic hit",this.camera),this.camera.snapAsBlob().then(n=>{this.isTaken=!0,console.log("data ",n)})}},data(){return{camera:null,isTaken:!1,buttons:[{name:"Use Camera",icon:"camera"},{name:"Upload Image",icon:"upload"},{name:"Continue on smartphone",icon:"phone"}]}}},ce={class:"header"},ue={autoplay:"",playsinline:""};function de(n,t,e,s,i,r){const a=H,p=ee,M=W,o=J;return m(),w(o,{class:"main-card"},{header:c(()=>[h("div",ce,[h("h1",null,N(e.title),1)])]),default:c(()=>[d(a,{plain:"",onClick:r.takePic},{default:c(()=>[y(" take a picture")]),_:1},8,["onClick"]),k(d(a,{plain:"",onClick:t[0]||(t[0]=l=>i.isTaken=!1)},{default:c(()=>[y(" take Another")]),_:1},512),[[C,i.isTaken]]),d(M,null,{default:c(()=>[(m(!0),P(q,null,G(i.buttons,l=>(m(),P("div",null,[d(p,{col:"6"},{default:c(()=>[d(a,{plain:"",onClick:g=>n.upload(l)},{default:c(()=>[y(N(l.name),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),256))]),_:1}),k(h("video",ue,null,512),[[C,!i.isTaken]]),k(h("canvas",null,null,512),[[C,i.isTaken]])]),_:1})}const fe=Q(le,[["render",de]]),ve={__name:"UploadPassportView",setup(n){return(t,e)=>(m(),w(fe,{title:"Upload Passport"}))}};export{ve as default};
