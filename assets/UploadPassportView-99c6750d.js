import{p as P,q as u,v as D,ah as O,h as _,ai as j,A as U,s as k,aj as B,F as f,G as C,I as l,a0 as I,K as S,l as E,L as A,W as T,a3 as L,a4 as V,J as m,a9 as $,H as g,Q as M,R as F,Z as R,ak as K,ac as q,ae as G,ad as H}from"./index-16028c51.js";import{m as d,_ as W}from"./typescript-f1f07b4c.js";const J=P({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:u([Number,Object]),default:()=>d({})},sm:{type:u([Number,Object]),default:()=>d({})},md:{type:u([Number,Object]),default:()=>d({})},lg:{type:u([Number,Object]),default:()=>d({})},xl:{type:u([Number,Object]),default:()=>d({})}}),Q=D({name:"ElCol"}),Z=D({...Q,props:J,setup(n){const t=n,{gutter:e}=O(j,{gutter:_(()=>0)}),s=U("col"),i=_(()=>{const a={};return e.value&&(a.paddingLeft=a.paddingRight=`${e.value/2}px`),a}),o=_(()=>{const a=[];return["span","offset","pull","push"].forEach(r=>{const c=t[r];k(c)&&(r==="span"?a.push(s.b(`${t[r]}`)):c>0&&a.push(s.b(`${r}-${t[r]}`)))}),["xs","sm","md","lg","xl"].forEach(r=>{k(t[r])?a.push(s.b(`${r}-${t[r]}`)):B(t[r])&&Object.entries(t[r]).forEach(([c,p])=>{a.push(c!=="span"?s.b(`${r}-${c}-${p}`):s.b(`${r}-${p}`))})}),e.value&&a.push(s.is("guttered")),[s.b(),a]});return(a,h)=>(f(),C(T(a.tag),{class:S(E(o)),style:A(E(i))},{default:l(()=>[I(a.$slots,"default")]),_:3},8,["class","style"]))}});var X=L(Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const Y=V(X);var v={},b={};Object.defineProperty(b,"__esModule",{value:!0});function z(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var ee=function n(t){z(this,n),this.id=t.deviceId,this.label=t.label};b.default=ee;Object.defineProperty(v,"__esModule",{value:!0});v.Constraints=void 0;var N=function(){function n(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,s){return e&&n(t.prototype,e),s&&n(t,s),t}}(),te=b,ae=ne(te);function ne(n){return n&&n.__esModule?n:{default:n}}function x(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var y=v.Constraints=function(){function n(){x(this,n),this.video={facingMode:"user"},this.audio=!1}return N(n,[{key:"switchFacingMode",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.video.facingMode==="user"?this.video.facingMode="environment":e?this.video.facingMode={exact:"environment"}:this.video.facingMode="user",this}},{key:"getConstraint",value:function(){return{video:this.video,audio:this.audio}}}]),n}(),se=function(){function n(t,e){x(this,n),this.devices=[],this.stream=null,this.canvasElement=e,this.videoElement=t,this.constraints=new y}return N(n,[{key:"getDevices",value:function(){var e=this;return new Promise(async function(s,i){if(e.devices.length>0){s(e.devices);return}try{var o=await navigator.mediaDevices.enumerateDevices();o.forEach(function(a){a.kind&&a.kind.toLocaleLowerCase()==="videoinput"&&e.devices.push(new ae.default(a))}),s(e.devices)}catch(a){console.error("GetDevices",a),i(a)}})}},{key:"setVideoConstraints",value:function(e){return this.constraints||(this.constraints=new y),this.constraints.video=e,this}},{key:"snap",value:function(){this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight;var e=this.canvasElement.getContext("2d");return e.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height),this.canvasElement}},{key:"snapAsDataUrl",value:function(){this.snap();var e=this.canvasElement.toDataURL("image/png");return e}},{key:"snapAsBlob",value:function(){var e=this;return this.snap(),new Promise(function(s){e.canvasElement.toBlob(function(i){s(i)},"image/png",1)})}},{key:"start",value:function(){var e=this;return new Promise(async function(s,i){try{await e.getDevices();var o=await navigator.mediaDevices.getUserMedia(e.constraints.getConstraint());e.videoElement.srcObject=o,e.stream=o,s()}catch(a){console.error("StartCamera",a),i(a)}})}},{key:"stop",value:function(){if(!!this.stream){var e=this.videoElement.srcObject.getTracks();e.forEach(function(s){return s.stop()})}}},{key:"switch",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return new Promise(async function(i,o){e.constraints=e.constraints.switchFacingMode(s),e.stop();try{await e.start(),i()}catch(a){console.error("SwitchCamera",a),o(a)}})}}],[{key:"isCameraSupported",value:function(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices}},{key:"tryInvokePermission",value:function(e,s){return new Promise(async function(i,o){try{await navigator.mediaDevices.getUserMedia(new y),i(new n(e,s))}catch(a){console.error("MediaDevices",a),o(a)}})}}]),n}(),ie=v.default=se;const re={mounted(){var n=document.getElementsByTagName("video")[0],t=document.getElementsByTagName("canvas")[0];ie.tryInvokePermission(n,t).then(e=>{e.start()}).catch(e=>{})},props:["title"],data(){return{camera:null,buttons:[{name:"Use Camera",icon:"camera"},{name:"Upload Image",icon:"upload"},{name:"Continue on smartphone",icon:"phone"}]}}},oe={class:"header"},ce=m("video",{autoplay:"",playsinline:""},null,-1),le=m("canvas",null,null,-1);function ue(n,t,e,s,i,o){const a=q,h=Y,w=G,r=H;return f(),C(r,{class:"main-card"},{header:l(()=>[m("div",oe,[m("h1",null,$(e.title),1)])]),default:l(()=>[ce,le,g(w,null,{default:l(()=>[(f(!0),M(F,null,R(i.buttons,c=>(f(),M("div",null,[g(h,{col:"6"},{default:l(()=>[g(a,{plain:"",onClick:p=>n.upload(c)},{default:l(()=>[K($(c.name),1)]),_:2},1032,["onClick"])]),_:2},1024)]))),256))]),_:1})]),_:1})}const de=W(re,[["render",ue]]),ve={__name:"UploadPassportView",setup(n){return(t,e)=>(f(),C(de,{title:"Upload Passport"}))}};export{ve as default};
